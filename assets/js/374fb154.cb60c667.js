"use strict";(self.webpackChunkdocusaurus_blog=self.webpackChunkdocusaurus_blog||[]).push([[8118],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=u(n),d=i,g=h["".concat(l,".").concat(d)]||h[d]||c[d]||a;return n?o.createElement(g,r(r({ref:t},p),{},{components:n})):o.createElement(g,r({ref:t},p))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var u=2;u<a;u++)r[u]=n[u];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1657:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var o=n(7462),i=(n(7294),n(3905));const a={slug:"2022/github-actions-for-flutter-web/",title:"GitHub Actions to deploy Flutter Web to gh-pages",date:"2022-08-02 19:50:00 +0530",tags:["Flutter","Open-Source","GitHub Actions","Tech"],authors:["immadisairaj"],comments:!0,image:"./thumbnail.jpeg"},r=void 0,s={permalink:"/blog/2022/github-actions-for-flutter-web/",source:"@site/blog/2022-08-02-github-actions-for-flutter-web/index.md",title:"GitHub Actions to deploy Flutter Web to gh-pages",description:"Do you deploy your Flutter web application in gh-pages? And you are tired of manually deploying the app every time? Or do you want to deploy your Flutter web application to gh-pages? Then this blog is for you. Continue ahead to know how to simplify the process.",date:"2022-08-02T19:50:00.000Z",formattedDate:"August 2, 2022",tags:[{label:"Flutter",permalink:"/blog/tags/flutter"},{label:"Open-Source",permalink:"/blog/tags/open-source"},{label:"GitHub Actions",permalink:"/blog/tags/git-hub-actions"},{label:"Tech",permalink:"/blog/tags/tech"}],readingTime:5.68,hasTruncateMarker:!1,authors:[{name:"Sai Rajendra Immadi",title:"Flutter Developer",url:"https://github.com/immadisairaj",imageURL:"https://github.com/immadisairaj.png",key:"immadisairaj"}],frontMatter:{slug:"2022/github-actions-for-flutter-web/",title:"GitHub Actions to deploy Flutter Web to gh-pages",date:"2022-08-02 19:50:00 +0530",tags:["Flutter","Open-Source","GitHub Actions","Tech"],authors:["immadisairaj"],comments:!0,image:"./thumbnail.jpeg"},nextItem:{title:"Build an Arrow Pad in Flutter",permalink:"/blog/2021/build-arrow-pad/"}},l={image:n(3022).Z,authorsImageUrls:[void 0]},u=[{value:"What are GitHub Actions?",id:"what-are-github-actions",level:2},{value:"What are GitHub Pages?",id:"what-are-github-pages",level:2},{value:"What are we going to do?",id:"what-are-we-going-to-do",level:2},{value:"Getting Your Personal Access Token from GitHub",id:"getting-your-personal-access-token-from-github",level:3},{value:"Adding the Token to GitHub Actions secrets",id:"adding-the-token-to-github-actions-secrets",level:3},{value:"Writing GitHub Actions workflow to deploy",id:"writing-github-actions-workflow-to-deploy",level:3},{value:"Bonus",id:"bonus",level:3},{value:"Conclusion",id:"conclusion",level:2}],p={toc:u};function c(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,o.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Do you deploy your Flutter web application in gh-pages? And you are tired of manually deploying the app every time? Or do you want to deploy your Flutter web application to gh-pages? Then this blog is for you. Continue ahead to know how to simplify the process."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Thumbnail Design",src:n(3022).Z,width:"1920",height:"1080"})),(0,i.kt)("h2",{id:"what-are-github-actions"},"What are GitHub Actions?"),(0,i.kt)("p",null,"In a simplified manner, Actions are scripts automated to do something after they are on GitHub."),(0,i.kt)("p",null,"Officially from what GitHub says, GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub. Make code reviews, branch management, and issue triaging work the way you want. You can read more about it ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/features/actions"},"here"),"."),(0,i.kt)("h2",{id:"what-are-github-pages"},"What are GitHub Pages?"),(0,i.kt)("p",null,"In simple terms, they are static web pages hosted on GitHub via repositories. They are static, which means we won't be able to get any data that is dynamic. You can read more about it ",(0,i.kt)("a",{parentName:"p",href:"https://pages.github.com"},"here"),"."),(0,i.kt)("p",null,"If you are the one that wants to host static web pages, you can continue. Else, I don't want to waste your time."),(0,i.kt)("h2",{id:"what-are-we-going-to-do"},"What are we going to do?"),(0,i.kt)("p",null,"Okay, I will get to the point. If you are a Flutter developer, have a static web page built, and want to deploy it. That is where I come in to help you. I make things simpler by deploying your web app to gh-pages with ease."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Let's first look at how the following goes:")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Getting Your Personal Access Token from GitHub"),(0,i.kt)("li",{parentName:"ol"},"Adding the Token to GitHub Actions secrets"),(0,i.kt)("li",{parentName:"ol"},"Writing GitHub Actions workflow to deploy")),(0,i.kt)("h3",{id:"getting-your-personal-access-token-from-github"},"Getting Your Personal Access Token from GitHub"),(0,i.kt)("p",null,"Why is this necessary? It is because we build the web app behind the hood and then push the commit to deploy into gh-pages with your GitHub credentials."),(0,i.kt)("p",null,"If you worry that this method might compromise your security, Don't worry, this method won't harm you an inch because we won't be giving full access to it."),(0,i.kt)("p",null,"To start, first click ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/settings/tokens/new"},"this")," link to generate a new GitHub Personal Access Token."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"options to give while creating a Personal Access Token",src:n(6448).Z,width:"1706",height:"1250"})),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"options to give while creating a Personal Access Token")),(0,i.kt)("p",null,"You can set the checkboxes as per the above image. The name can be your custom name, and the duration limit you give is up to your use case."),(0,i.kt)("p",null,'Once done here, scroll down and click on "Generate Token".'),(0,i.kt)("p",null,"After the token is generated, NOTE it down somewhere to be used in the next phase. Let's call this token ",(0,i.kt)("inlineCode",{parentName:"p"},"<YOUR GENERATED PA TOKEN>"),"."),(0,i.kt)("h3",{id:"adding-the-token-to-github-actions-secrets"},"Adding the Token to GitHub Actions secrets"),(0,i.kt)("p",null,"Assuming that you already have the code for the web application in the GitHub repository, I will continue with this phase. If you don't have a GitHub repository, you continue once you have one."),(0,i.kt)("p",null,"You can visit the settings of the project repository to add the token you received before into secrets. You can use the following link."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://github.com/<username>/<repository>/settings/secrets/actions/new\n")),(0,i.kt)("p",null,"*Make sure to replace ",(0,i.kt)("inlineCode",{parentName:"p"},"<username>")," with your GitHub username and ",(0,i.kt)("inlineCode",{parentName:"p"},"<repository>")," with the repository."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"add the Personal Access Token into GitHub Actions secrets",src:n(2578).Z,width:"1662",height:"920"})),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"add the Personal Access Token into GitHub Actions secrets")),(0,i.kt)("p",null,"Once you see the screen (from the image), you can add your Personal Access Token generated from the previous phase ",(0,i.kt)("inlineCode",{parentName:"p"},"<YOUR GENERATED PA TOKEN>")," with the name ",(0,i.kt)("inlineCode",{parentName:"p"},"ACCESS_TOKEN")," as in the image."),(0,i.kt)("p",null,"Now that we have added the token into GitHub Action secrets, it is safe, and you can delete/remove the previously noted so that it is not known to anyone. And now, we can move on to the next phase."),(0,i.kt)("h3",{id:"writing-github-actions-workflow-to-deploy"},"Writing GitHub Actions workflow to deploy"),(0,i.kt)("p",null,"Assuming you have a basic understanding of how to set up a new branch to deploy a web app into GitHub Pages. Else, you can read it ",(0,i.kt)("a",{parentName:"p",href:"https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site"},"here"),"."),(0,i.kt)("p",null,"If you don't have a separate branch used for deploying, please do create a new branch (preferred ",(0,i.kt)("inlineCode",{parentName:"p"},"gh-pages"),")."),(0,i.kt)("p",null,"Once you have a specific branch name (say ",(0,i.kt)("inlineCode",{parentName:"p"},"gh-pages"),") that uses to deploy into GitHub Pages, you can create a file name ",(0,i.kt)("inlineCode",{parentName:"p"},"web-deploy.yml")," under ",(0,i.kt)("inlineCode",{parentName:"p"},".github/workflows")," in the root folder of ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"master")," (or your preference) branch."),(0,i.kt)("p",null,"You can now copy the below directly into the file specified above while making a few changes."),(0,i.kt)("p",null,"You can look at comments starting with ",(0,i.kt)("inlineCode",{parentName:"p"},"#!")," in the following to make changes accordingly."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dart",metastring:'title=".github/workflows/web_deploy.yml"',title:'".github/workflows/web_deploy.yml"'},'name: Deploy to GitHub Pages\n\non:\n  push:\n    # Update branch according from where you will be pushing the code\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    env:\n      my_secret: ${{secrets.ACCESS_TOKEN}}\n\n    steps:\n      - uses: actions/checkout@v3\n      - uses: subosito/flutter-action@v2\n        with:\n          channel: \'stable\'\n\n      - run: flutter clean\n      - run: flutter pub get\n      - run: flutter build web --release\n\n      # Web deploy now is contained in build/web directory\n      - run: |\n          cd build\n          mkdir web-deploy\n          cd web-deploy\n          #! Update with your Email ID associated with GitHub\n          git config --global user.email <email ID>\n          #! Update with your username associated with GitHub\n          git config --global user.name <username>\n          git init\n          # the repository to push the deploy into\n          #! Update the following with your username and repository\n          git remote add origin https://${{secrets.ACCESS_TOKEN}}@github.com/<username>/<repository>.git\n          git fetch origin gh-pages\n          git switch gh-pages\n          # copy the build that is there in ROOT/build/web into ROOT/build/web-deploy\n          cp -R ../web/* .\n          git status\n          git add .\n          # add commit of the previous commit from main\n          echo ""\n          echo "Committing to gh-pages: ${{ github.event.head_commit.message }}"\n          echo ""\n          git commit -m "${{ github.event.head_commit.message }}"\n          git push origin gh-pages\n          \n')),(0,i.kt)("p",null,"Once done adding it, commit it to the main branch. From this point on, you don't need to manually push the build to the deployment after having new changes."),(0,i.kt)("h3",{id:"bonus"},"Bonus"),(0,i.kt)("p",null,"You can continue with the bonus if you want to understand what the above action or script is doing. Else you can skip this."),(0,i.kt)("p",null,"Once you push the commit into GitHub Repository (say ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," branch), the GitHub Action is triggered (following steps)."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Installs flutter in the ubuntu-latest system."),(0,i.kt)("li",{parentName:"ul"},"Builds flutter web into ",(0,i.kt)("inlineCode",{parentName:"li"},"/build/web"),"."),(0,i.kt)("li",{parentName:"ul"},"Pull the ",(0,i.kt)("inlineCode",{parentName:"li"},"gh-pages")," branch from the repository into ",(0,i.kt)("inlineCode",{parentName:"li"},"/build/web-deploy"),"."),(0,i.kt)("li",{parentName:"ul"},"Copy the build from ",(0,i.kt)("inlineCode",{parentName:"li"},"/build/web")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"/build/web-deploy"),"."),(0,i.kt)("li",{parentName:"ul"},"Commit the change with the commit message that triggered this action."),(0,i.kt)("li",{parentName:"ul"},"Push the new commit to ",(0,i.kt)("inlineCode",{parentName:"li"},"gh-pages")," branch into the repository (for which the personal access token is useful). This push, in turn, starts another GitHub Action to deploy the site.")),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"After this long 3 step process, you have now automated the process to deploy your Flutter web into GitHub Pages. Once you push a new commit, this GitHub Action starts and a new commit for you to deploy GitHub Pages."),(0,i.kt)("p",null,"Now, use the time I saved into something helpful and Happy Fluttering!"),(0,i.kt)("p",null,"If this has been useful, please consider sponsoring me via"),(0,i.kt)("iframe",{src:"https://github.com/sponsors/immadisairaj/card",title:"Sponsor immadisairaj",height:"200",width:"600"}))}c.isMDXComponent=!0},2578:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/action-secrets-b55c5543834c1f745988567d2437fe99.png"},6448:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/pat-setting-1690fc6f524e8c857ce4427f78605e59.png"},3022:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/thumbnail-1611d361875b935f9b31ff0a5cdcb4a2.jpeg"}}]);